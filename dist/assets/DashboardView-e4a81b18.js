import{b as o,A as T,d as H,g as h,f as j,i as B,n as R,j as x,r as u,o as v,c as b,w as r,h as C,k as U,F as L,t as K,a as _,l as z,m as G,p as J,q as Q,R as W,s as X}from"./index-e3115a85.js";import{a as M,_ as q}from"./_plugin-vue_export-helper-12449478.js";var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};const Z=Y;function F(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),d.forEach(function(p){ee(e,p,a[p])})}return e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=function(t,a){var d=F({},t,a.attrs);return o(T,F({},d,{icon:Z}),null)};D.displayName="LogoutOutlined";D.inheritAttrs=!1;const te=D;var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"};const ne=ae;function A(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),d.forEach(function(p){oe(e,p,a[p])})}return e}function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var E=function(t,a){var d=A({},t,a.attrs);return o(T,A({},d,{icon:ne}),null)};E.displayName="MenuFoldOutlined";E.inheritAttrs=!1;const le=E;var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"};const ie=se;function N(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),d.forEach(function(p){re(e,p,a[p])})}return e}function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var I=function(t,a){var d=N({},t,a.attrs);return o(T,N({},d,{icon:ie}),null)};I.displayName="MenuUnfoldOutlined";I.inheritAttrs=!1;const de=I,ue=[{title:"Nome",dataIndex:"name"},{title:"CPF",dataIndex:"cpf"},{title:"Tipo",dataIndex:"type"},{title:"Telefone",dataIndex:"phone"},{title:"Email",dataIndex:"email"},{title:"Password",dataIndex:"password"},{title:"Ações",dataIndex:"operation"}],ce=[],pe=H({setup(){const e=h("Content of the modal"),t=h(!1),a=h(!1),d=()=>{t.value=!0},p=async()=>{a.value=!0;const l={name:`${s.name}`,cpf:`${s.cpf}`,type:`${s.type}`,phone:`${s.phone}`,email:`${s.email}`,password:`${s.password}`};await M.post("http://127.0.0.1:8000/api/save",{...l}).then(n=>{var f;const c=(f=n==null?void 0:n.data)!=null&&f.hasOwnProperty("id")?{...n==null?void 0:n.data}:[];m.value.push({key:c.id,name:`${c.name}`,cpf:`${c.cpf}`,type:`${c.type}`,phone:`${c.phone}`,email:`${c.email}`,password:`${c.password}`}),t.value=!1}).catch(n=>{R.open({message:"Erro",description:n.response.data.message,onClick:()=>{console.log("Notification Clicked!")}})}).finally(()=>{s.name,s.cpf,s.type,s.phone,s.email,s.password,a.value=!1})},P={labelCol:{span:8},wrapperCol:{span:16}},O={required:"${label} is required!"},s=j({name:"",cpf:"",type:"",phone:"",email:"",password:""}),w=l=>{console.log("Success:",l)},m=h(ce);B(()=>m.value.length+1);const y=j({}),k=l=>{y[l]=x(m.value.filter(n=>l===n.key)[0])},g=async l=>{const n=y[l];await M.put(`http://127.0.0.1:8000/api/update/${n.key}`,{name:n.name,cpf:n.cpf,type:n.type,phone:n.phone,email:n.email,password:n.password}).then(c=>{Object.assign(m.value.filter(f=>l===f.key)[0],y[l]),delete y[l]}).finally(()=>{})},S=l=>{delete y[l]},$=async l=>{await M.delete(`http://127.0.0.1:8000/api/delete/${l}`).then(n=>{m.value=m.value.filter(c=>c.key!==l)}).finally(()=>{})};async function i(){await M.get("http://127.0.0.1:8000/api/user").then(l=>{var c;const n=((c=l==null?void 0:l.data)==null?void 0:c.length)>0?[...l.data]:[];m.value=n.map(f=>({key:f.id.toString(),name:f.name,cpf:f.cpf,type:f.type,phone:f.phone,email:f.email,password:f.password}))}).finally(()=>{})}return{dataSource:m,columns:ue,editingKey:"",editableData:y,edit:k,saveEdit:g,cancelEdit:S,onDelete:$,getUsers:i,modalText:e,visible:t,confirmLoading:a,showModal:d,handleOk:p,formState:s,onFinish:w,layout:P,validateMessages:O}},async created(){await this.getUsers()}});const V=e=>(J("data-v-f04c98af"),e=e(),Q(),e),me={key:0},fe={key:0},ve=V(()=>_("a",null,"Cancelar",-1)),ye={key:1},ge=["onClick"],_e=V(()=>_("a",null,"Deletar",-1));function be(e,t,a,d,p,P){const O=u("a-button"),s=u("a-input"),w=u("a-typography-link"),m=u("a-popconfirm"),y=u("a-divider"),k=u("a-table"),g=u("a-form-item"),S=u("a-form"),$=u("a-modal");return v(),b(L,null,[o(O,{class:"editable-add-btn",style:{"margin-bottom":"8px"},onClick:e.showModal},{default:r(()=>[C("Adicionar")]),_:1},8,["onClick"]),o(k,{columns:e.columns,"data-source":e.dataSource,bordered:"",scroll:{x:2e3}},{bodyCell:r(({column:i,text:l,record:n})=>[["name","cpf","type","phone","email","password"].includes(i.dataIndex)?(v(),b("div",me,[e.editableData[n.key]?(v(),U(s,{key:0,value:e.editableData[n.key][i.dataIndex],"onUpdate:value":c=>e.editableData[n.key][i.dataIndex]=c,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(v(),b(L,{key:1},[C(K(l),1)],64))])):i.dataIndex==="operation"?(v(),b(L,{key:1},[e.editableData[n.key]?(v(),b("span",fe,[o(w,{onClick:c=>e.saveEdit(n.key)},{default:r(()=>[C("Salvar ")]),_:2},1032,["onClick"]),o(m,{title:"Tem certeza?",cancelText:"Não",okText:"Sim",onConfirm:c=>e.cancelEdit(n.key)},{default:r(()=>[ve]),_:2},1032,["onConfirm"])])):(v(),b("span",ye,[_("a",{onClick:c=>e.edit(n.key)},"Editar",8,ge)])),o(y,{type:"vertical"}),e.dataSource.length?(v(),U(m,{key:2,title:"Tem certeza?",onConfirm:c=>e.onDelete(n.key),cancelText:"Não",okText:"Sim"},{default:r(()=>[_e]),_:2},1032,["onConfirm"])):z("",!0)],64)):z("",!0)]),emptyText:r(()=>[C(" Sem registros ")]),_:1},8,["columns","data-source"]),_("div",null,[o($,{visible:e.visible,"onUpdate:visible":t[6]||(t[6]=i=>e.visible=i),title:"Adicionar novo usuário","confirm-loading":e.confirmLoading,onOk:e.handleOk},{default:r(()=>[o(S,G({model:e.formState},e.layout,{name:"nest-messages","validate-messages":e.validateMessages,onFinish:e.onFinish}),{default:r(()=>[o(g,{name:["name"],label:"Nome",rules:[{required:!0}]},{default:r(()=>[o(s,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=i=>e.formState.name=i)},null,8,["value"])]),_:1}),o(g,{name:["cpf"],label:"Cpf",rules:[{required:!0}]},{default:r(()=>[o(s,{value:e.formState.cpf,"onUpdate:value":t[1]||(t[1]=i=>e.formState.cpf=i)},null,8,["value"])]),_:1}),o(g,{name:["type"],label:"Tipo",rules:[{required:!0}]},{default:r(()=>[o(s,{value:e.formState.type,"onUpdate:value":t[2]||(t[2]=i=>e.formState.type=i)},null,8,["value"])]),_:1}),o(g,{name:["phone"],label:"Telefone",rules:[{required:!0}]},{default:r(()=>[o(s,{value:e.formState.phone,"onUpdate:value":t[3]||(t[3]=i=>e.formState.phone=i)},null,8,["value"])]),_:1}),o(g,{name:["email"],label:"Email",rules:[{required:!0}]},{default:r(()=>[o(s,{value:e.formState.email,"onUpdate:value":t[4]||(t[4]=i=>e.formState.email=i)},null,8,["value"])]),_:1}),o(g,{name:["password"],label:"Senha",rules:[{required:!0}]},{default:r(()=>[o(s,{value:e.formState.password,"onUpdate:value":t[5]||(t[5]=i=>e.formState.password=i)},null,8,["value"])]),_:1})]),_:1},16,["model","validate-messages","onFinish"])]),_:1},8,["visible","confirm-loading","onOk"])])],64)}const he=q(pe,[["render",be],["__scopeId","data-v-f04c98af"]]),Oe=H({components:{LogoutOutlined:te,MenuUnfoldOutlined:de,MenuFoldOutlined:le,RouterLink:W,RouterView:X,TableUser:he},setup(){return{selectedKeys:h(["1"]),collapsed:h(!1)}}});const we=_("div",{class:"logo"},null,-1),ke=_("span",{style:{color:"white !important"}},"Sair",-1);function Se(e,t,a,d,p,P){const O=u("logout-outlined"),s=u("RouterLink"),w=u("a-menu-item"),m=u("a-menu"),y=u("a-layout-sider"),k=u("menu-unfold-outlined"),g=u("menu-fold-outlined"),S=u("a-layout-header"),$=u("TableUser"),i=u("a-layout-content"),l=u("a-layout");return v(),U(l,{id:"components-layout-demo-custom-trigger"},{default:r(()=>[o(y,{collapsed:e.collapsed,"onUpdate:collapsed":t[1]||(t[1]=n=>e.collapsed=n),trigger:null,collapsible:""},{default:r(()=>[we,o(m,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":t[0]||(t[0]=n=>e.selectedKeys=n),theme:"dark",mode:"inline"},{default:r(()=>[o(w,{key:"1"},{default:r(()=>[o(O),_("span",null,[o(s,{to:"/"},{default:r(()=>[C("  "),ke]),_:1})])]),_:1})]),_:1},8,["selectedKeys"])]),_:1},8,["collapsed"]),o(l,null,{default:r(()=>[o(S,{style:{background:"#fff",padding:"0"}},{default:r(()=>[e.collapsed?(v(),U(k,{key:0,class:"trigger",onClick:t[2]||(t[2]=()=>e.collapsed=!e.collapsed)})):(v(),U(g,{key:1,class:"trigger",onClick:t[3]||(t[3]=()=>e.collapsed=!e.collapsed)}))]),_:1}),o(i,{style:{margin:"24px 16px",padding:"24px",background:"#fff",minHeight:"280px"}},{default:r(()=>[o($)]),_:1})]),_:1})]),_:1})}const Ue=q(Oe,[["render",Se]]);export{Ue as default};
